---
layout: post
title: "self vs @"
date: 2015-04-20 10:24:41 +0000
comments: true
categories: 
---

### self vs @

@ 를 이용하면 해당 객체의 instance variable 에 직접 액세스하여 데이터를 가져오는데 self 를 이용하면 해당 객체에 실제 "메세지"를 보내는 방식으로 데이터에 접근하여 해당 객체의 현재 상태의 (current state) 값에 액세스할 수 있음. 아래의 예제는 File 객체를 @ 와 self 를 이용해서 접근할때 file pointer 가 변경되는 상태까지 self 를 이용해서 액세스하는것을 보여준다.

```ruby
# Content of self_at.txt
#line1
#line2
#line3
#line4
#line5
#line6
#line7
#line8
#line9
#line10
#line11
#line12

class Test

  attr_accessor :file

  def initialize
    self.file = File.open("self_at.txt", 'r')
    self.file.each do |line|
      if line =~ /line4/
        puts "read line4 so far"
        continue(self)
      end
    end
  end

  def continue(obj)
    p obj.file.take_while { |line| not(line =~ /line9/) }
    print_rest(self)
  end

  def print_rest(obj)
    puts "print the rest..."
    obj.file.each { |line| puts line }
    return self
  end
end

Test.new

#$ ruby self_test.rb
#read line4 so far
#["line5\n", "line6\n", "line7\n", "line8\n"]
#print the rest...
#line10
#line11
#line12
```
